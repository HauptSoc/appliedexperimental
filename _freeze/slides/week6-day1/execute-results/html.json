{
  "hash": "60853b8415fd7e8ee4112e951f8ad76e",
  "result": {
    "markdown": "---\ntitle: \"Variable Selection in Multiple Regression\"\nformat: \n  revealjs:\n    theme: style.scss\neditor: visual\n---\n\n::: {.cell}\n\n:::\n\n\n# Statistical Critique\n\n## Feedback & Revisions\n\n::: incremental\n::: small\n-   You are expected to directly state what variable(s) are associated with each aesthetic (e.g., the x-axis is associated with time).\n-   Aesthetics are associated with **variables**\n    -   If there is only one color / shape / linetype being used in the plot, it is not associated with a variable!\n    -   If there are multiple plots, then there is a variable associated with how the plots are separated!\n:::\n:::\n\n::: callout-caution\n# Revision Deadline\n\nRevisions for Statistical Critiques are due next Thursday (February 22)\n:::\n\n# Midterm Project\n\n## Research Questions\n\n::: incremental\n-   Your research question should be a [question]{.underline}\n\n-   Your question should be able to be addressed with a [multiple linear regression]{.underline}\n\n    -   Is the relationship between stem length and stem dry mass different for watersheds treated with calcium versus without?\n    -   What is the relationship between the size of a fiddler crab and the latitude and water temperature in which it lives?\n:::\n\n## Data Visualizations & Coefficient Interpretations\n\n-   Descriptions of your visualizations should address:\n    -   form, direction, strength, and unusual points\n-   You should interpret **every** coefficient from your regression equation(s)!\n    -   Every y-intercept and every slope\n\n## Study Limitations -- Scope of Inference\n\nBased on how the study was designed, what population can you infer these results onto?\n\n::: fragment\n::: small\n-   Every sugar maple?\n-   Sugar maples in the Northeast?\n-   Sugar maples in New Hampshire?\n-   Sugar maples in the Hubbard Brook Experimental Forest?\n-   Sugar maples in similar areas of the Hubbard Brook Experimental Forest to those that were sampled?\n-   This sample of sugar maples?\n:::\n:::\n\n. . .\n\nWhy?\n\n## Study Limitations -- Causal Inference\n\nBased on how the study was designed, what can you say about the relationships between the variables?\n\n::: fragment\n::: small\n-   Can you say that your explanatory variable(s) [causes]{.underline} changes in your response variable?\n-   Why or why not?\n-   What can you say about these relationships?\n:::\n:::\n\n## Writing Conclusions\n\n-   Circle back to your research question\n-   What did you learn in your visualizations?\n-   What did you learn in your regression model?\n-   What conclusions would you reach about your research question?\n\n::: callout-caution\n# No \"significance\" & no p-values\n:::\n\n# Model Selection\n\n## \n\n::: {style=\"font-size: 2.5em; color: #76b5c5;\"}\n**What is model selection?**\n:::\n\n. . .\n\n</br> </br>\n\n::: {style=\"font-size: 2.5em; color: #e28743;\"}\n**Why use model selection?**\n:::\n\n## \n\n::: {style=\"font-size: 1.5em;\"}\n1.  Lots of available predictor variables\n:::\n\n`evals`:\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> ID </th>\n   <th style=\"text-align:right;\"> prof_ID </th>\n   <th style=\"text-align:right;\"> score </th>\n   <th style=\"text-align:right;\"> age </th>\n   <th style=\"text-align:right;\"> bty_avg </th>\n   <th style=\"text-align:left;\"> gender </th>\n   <th style=\"text-align:left;\"> ethnicity </th>\n   <th style=\"text-align:left;\"> language </th>\n   <th style=\"text-align:left;\"> rank </th>\n   <th style=\"text-align:left;\"> pic_outfit </th>\n   <th style=\"text-align:left;\"> pic_color </th>\n   <th style=\"text-align:right;\"> cls_did_eval </th>\n   <th style=\"text-align:right;\"> cls_students </th>\n   <th style=\"text-align:left;\"> cls_level </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 107 </td>\n   <td style=\"text-align:right;\"> 19 </td>\n   <td style=\"text-align:right;\"> 4.3 </td>\n   <td style=\"text-align:right;\"> 46 </td>\n   <td style=\"text-align:right;\"> 4.333 </td>\n   <td style=\"text-align:left;\"> female </td>\n   <td style=\"text-align:left;\"> not minority </td>\n   <td style=\"text-align:left;\"> english </td>\n   <td style=\"text-align:left;\"> tenured </td>\n   <td style=\"text-align:left;\"> not formal </td>\n   <td style=\"text-align:left;\"> black&amp;white </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:left;\"> upper </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:right;\"> 4.4 </td>\n   <td style=\"text-align:right;\"> 33 </td>\n   <td style=\"text-align:right;\"> 4.667 </td>\n   <td style=\"text-align:left;\"> female </td>\n   <td style=\"text-align:left;\"> not minority </td>\n   <td style=\"text-align:left;\"> english </td>\n   <td style=\"text-align:left;\"> tenure track </td>\n   <td style=\"text-align:left;\"> not formal </td>\n   <td style=\"text-align:left;\"> color </td>\n   <td style=\"text-align:right;\"> 11 </td>\n   <td style=\"text-align:right;\"> 44 </td>\n   <td style=\"text-align:left;\"> upper </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 391 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 4.0 </td>\n   <td style=\"text-align:right;\"> 51 </td>\n   <td style=\"text-align:right;\"> 6.333 </td>\n   <td style=\"text-align:left;\"> female </td>\n   <td style=\"text-align:left;\"> not minority </td>\n   <td style=\"text-align:left;\"> english </td>\n   <td style=\"text-align:left;\"> tenured </td>\n   <td style=\"text-align:left;\"> not formal </td>\n   <td style=\"text-align:left;\"> color </td>\n   <td style=\"text-align:right;\"> 67 </td>\n   <td style=\"text-align:right;\"> 78 </td>\n   <td style=\"text-align:left;\"> upper </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## \n\n::: {style=\"font-size: 1.5em;\"}\n2.  Interested in prediction not explanation\n:::\n\n. . .\n\n> You want to predict an outcome variable $y$ based on the information contained in a set of predictor variables $x$. You don't care so much about understanding how all the variables relate and interact with one another, but rather only whether you can make good predictions about $y$ using the information in $x$.\n>\n> *ModernDive*\n\n## \n\n::: {style=\"font-size: 2em; color: #76b5c5;\"}\nHow do you use model selection?\n:::\n\n. . .\n\n::: columns\n::: {.column width=\"45%\"}\n-   Stepwise Selection\n    -   Forward Selection\n    -   Backward Selection\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n-   Resampling Methods\n    -   Cross Validation\n    -   Testing / Training Datasets\n:::\n:::\n\n. . .\n\n::: {style=\"font-size: 0.9em; color: #e28743;\"}\n**With any of these methods, you get to choose *how* you decide if one model is better than another model.**\n:::\n\n# Model Comparison Measures\n\n## \n\n::: {style=\"font-size: 2em; color: #76b5c5;\"}\n$R^2$ -- Coefficient of Determination\n:::\n\n<!-- Wright was one of the giants of 20th century evolutionary biology. -->\n\n::: columns\n::: {.column width=\"45%\"}\n![](images/wright.jpg)\n\n::: {style=\"font-size: 0.75em;\"}\nWright, Sewall (1921). Correlation and causation. Journal of Agricultural Research 20: 557-585.\n:::\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n::: {style=\"font-size: 0.75em;\"}\n> In statistics, the coefficient of determination, denoted $R^2$ or $r^2$ and pronounced \"R squared,\" is the proportion of the variation in the dependent variable that is predictable from the independent variable(s).\n>\n> *Wikipedia*\n:::\n:::\n:::\n\n## \n\n::: {style=\"font-size: 2em\"}\n$R^2 = 1 - \\frac{\\text{var}(\\text{residuals})}{\\text{var}(y)}$\n:::\n\n-   $\\text{var}(\\text{residuals})$ is the variance of the residuals \"leftover\" from the regression model\n\n-   $\\text{var}(y)$ is the inherent variability of the response variable\n\n. . .\n\n::: {style=\"font-size: 1.5em; color: #e28743;\"}\nSuppose we have a simple linear regression with an $R^2$ of 0.85. How would you interpret this quantity?\n:::\n\n## \n\n::: {style=\"font-size: 1.5em;\"}\nBut! $R^2$ **always** increases as you increase the number of explanatory variables.\n:::\n\n. . .\n\n</br>\n\n::: {style=\"color: #e28743;\"}\nThe variance of the residuals will **always** decrease when you include additional explanatory variables.\n:::\n\n::: columns\n::: {.column width=\"45%\"}\n**Simple Linear Regression**\n\n$0.85 = 1 - \\frac{0.75}{5}$\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n**One Additional Variable**\n\n$0.86 = 1 - \\frac{0.7}{5}$\n:::\n:::\n\n## \n\n::: {style=\"font-size: 2em; color: #76b5c5;\"}\nAdjusted $R^2$\n:::\n\n::: columns\n::: {.column width=\"45%\"}\n![](images/ezekiel.jpeg)\n\n::: {style=\"font-size: 0.75em;\"}\nMordecai Ezekiel (1930). Methods Of Correlation Analysis, Wiley, pp. 208-211.\n:::\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n::: {style=\"font-size: 0.75em;\"}\n> The use of an adjusted $R^2$ is an attempt to account for the phenomenon of the $R^2$ automatically increasing when extra explanatory variables are added to the model.\n>\n> *Wikipedia*\n:::\n:::\n:::\n\n## \n\n::: {style=\"font-size: 1.25em\"}\n$R^2_{adj} = 1 - R^2 \\times \\frac{(n - 1)}{(n - k - 1)}$\n:::\n\n-   $n$ is the sample size\n\n-   $k$ is the number of coefficients needed to be calculated\n\n. . .\n\n::: {style=\"font-size: 1.2em; color: #e28743;\"}\nSuppose you have a two categorical variables included in your regression, one with 7 levels and one with 4 levels.\n\n> What value will you use for $k$ in the calculation of $n - k - 1$?\n:::\n\n## \n\n::: {style=\"font-size: 2em; color: #76b5c5;\"}\np-values\n:::\n\n::: columns\n::: {.column width=\"45%\"}\n![](images/fisher.jpeg)\n\n::: {style=\"font-size: 0.75em;\"}\nFisher R. A. (1950). Statistical methods for research workers.\n:::\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n::: {style=\"font-size: 0.75em;\"}\n> In null-hypothesis significance testing, the p-value is the probability of obtaining test results at least as extreme as the result actually observed, under the assumption that the null hypothesis is correct. A very small p-value means that such an extreme observed outcome would be very unlikely under the null hypothesis.\n>\n> *Wikipedia*\n:::\n:::\n:::\n\n## \n\n::: {style=\"font-size: 2em; color: #76b5c5;\"}\nAIC\n:::\n\n::: columns\n::: {.column width=\"55%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](images/akaike.jpg){width=40%}\n:::\n:::\n\n\n::: {style=\"font-size: 0.75em;\"}\nAkaike, H. (1973). Information theory and an extension of the maximum likelihood principle.\n:::\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"40%\"}\n::: {style=\"font-size: 0.6em;\"}\n> The Akaike information criterion (AIC) is an estimator of prediction error and thereby relative quality of statistical models for a given set of data. Given a collection of models for the data, AIC estimates the quality of each model, relative to each of the other models.\n>\n> *Wikipedia*\n:::\n:::\n:::\n\n## \n\n::: {style=\"font-size: 1.5em; color: #76b5c5;\"}\nHow do you use AIC to choose a \"best\" model?\n:::\n\n. . .\n\n</br>\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> model </th>\n   <th style=\"text-align:right;\"> AIC </th>\n   <th style=\"text-align:right;\"> Delta AIC </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Full Model </td>\n   <td style=\"text-align:right;\"> 4724.970 </td>\n   <td style=\"text-align:right;\"> 0.000000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> All Variables Except Year </td>\n   <td style=\"text-align:right;\"> 4727.242 </td>\n   <td style=\"text-align:right;\"> 2.272501 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> All Variables Except Flipper Length </td>\n   <td style=\"text-align:right;\"> 4757.214 </td>\n   <td style=\"text-align:right;\"> 32.244605 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> All Variables Except Species </td>\n   <td style=\"text-align:right;\"> 4793.681 </td>\n   <td style=\"text-align:right;\"> 68.710933 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n:::\n\n. . .\n\n</br>\n\n::: {style=\"font-size: 0.75em; color: #e28743;\"}\nIf you've ever assessed whether $\\Delta$ AIC $> 2$ you have done something that is mathematically close to $p < 0.05$.\n:::\n\n# Model Selection Activity!\n\n## Backward Selection by Hand\n\n- Start with \"full\" model (every explanatory variable is included)\n  * Use adjusted $R^2$ to summarize the \"fit\" of this model\n\n- Decide which **one** variable to remove\n  * Highest adjusted $R^2$\n\n- Decide what **one** variable to remove next\n  * Highest adjusted $R^2$\n\n- Keep removing variables until adjusted $R^2$ doesn't increase\n\n## \n\n::: {style=\"font-size: 4em;\"}\nWhat's your best model?\n:::\n\n## Adding a Constraint\n\nRepeat the same process, but now for a variable to be removed the adjusted $R^2$ must increase by **at least** 2% (0.02). \n\n## \n\n::: {style=\"font-size: 4em;\"}\nWhat's your best model?\n:::\n\n## \n\n::: {style=\"font-size: 2em; color: #B6CADA;\"}\nIf you're not interested in prediction, what should you use instead?\n:::\n\n> In fact, many statisticians discourage the use of stepwise regression alone for model selection and advocate, instead, for a more thoughtful approach that carefully considers the research focus and features of the data.\n>\n> *Introduction to Modern Statistics*\n\n# For Thursday\n\n## Peer Review\n\nPlease print your Midterm Project and bring it to class!\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}