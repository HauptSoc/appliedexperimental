{
  "hash": "5fb6190d4f226bddfaf2accbe35efe90",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"🧑🏽‍🔬 P-values & Hypothesis Tests\"\nformat: \n  revealjs:\n    theme: style.scss\neditor: visual\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(infer)\nlibrary(moderndive)\nlibrary(lterdatasampler)\n\nnull_dist <- hbr_maples %>% \n  specify(response = stem_dry_mass,\n          explanatory = stem_length) %>% \n  hypothesize(null = \"independence\") %>% \n  generate(reps = 1000, type = \"permute\") %>% \n  calculate(stat = \"slope\") \n```\n:::\n\n\n\n# Plan for the rest of the quarter\n\n## Weeks 8, 9, & 10\n\n::: columns\n::: {.column width=\"30%\"}\n::: fragment\n**Week 8**\n\n-   Learn about hypothesis testing for SLR & MLR\n-   Compare \"visual\" model selection with p-value model selection\n:::\n:::\n\n::: {.column width=\"30%\"}\n::: fragment\n**Week 9**\n\n-   Learn about one-way ANOVA\n-   Get started on first portion of Final Project\n:::\n:::\n\n::: {.column width=\"30%\"}\n::: fragment\n**Week 10**\n\n-   Learn about two-way ANOVA\n-   Finish Final Project\n:::\n:::\n:::\n\n## Upcoming Deadlines\n\n-   Lab 6 revisions are due on Thursday (by midnight)\n-   Statistical Critique 2 is due next Monday (at 5pm)\n-   Final revisions on **all** assignments will be accepted until Sunday, March 17\n\n::: callout-note\n# Revision Deadlines\n\nIf you did not submit revisions by the deadline (or forgot to include your reflections), your assignment **is not** eligible for additional revisions.\n:::\n\n## \n\n::: {style=\"font-size: 4em; color: #000000;\"}\nyou...\n:::\n\n::: {style=\"font-size: 1.25em; color: #000000;\"}\n-   understand the importance of sampling variability\n-   know about using confidence intervals to estimate a range of plausible values for the population parameter\n-   want to know how p-values fit in\n:::\n\n##  {background-color=\"#B6CADA\"}\n\n::: {style=\"font-size: 2.5em; color: #000000;\"}\nWhat if I want to know if the population parameter differs from a specific value?\n:::\n\n. . .\n\n<center>\n\n::: {style=\"font-size: 3em; color: #0F4C81;\"}\nHypothesis test!\n:::\n\n</center>\n\n## \n\n::: {style=\"font-size: 3em; color: #000000;\"}\nHypothesis test goal:\n:::\n\n::: {style=\"font-size: 1.5em; color: #000000;\"}\nAssess how different what we saw in our data is from what could have happened if the null hypothesis was true\\*\n:::\n\n. . .\n\n::: {style=\"font-size: 0.75em;\"}\n\\*For hypothesis tests, we live in an alternative universe where $H_0$ is true\n:::\n\n## How can we approximate what could have happened if the null was true?\n\n. . .\n\n::: {style=\"font-size: 2em; color: #ed8402;\"}\nPermutation!\n:::\n\n## A Permutation Resample\n\n::: incremental\n-   Assumes the original sample is \"representative\" of observations in the population\n\n-   Uses the original sample to generate new samples that might have occurred if the null hypothesis was true.\n:::\n\n. . .\n\n::: {style=\"color: #34605f;\"}\nWe can use statistics from these resamples to approximate the true sampling distribution under the null!\n:::\n\n# Why do we want a sampling distribution?\n\n## Testing a Population Parameter\n\n::: incremental\n-   Like before, we are interested in knowing how a statistic varies from sample to sample.\n\n-   Knowing a statistic's behavior helps us make better / more informed decisions!\n\n-   This helps us know what statistics are more or less likely to occur [if the null hypothesis is true]{style=\"color: #e28743\"}.\n:::\n\n# p-values\n\n. . .\n\n::: {style=\"font-size: 1.5em; color: #000000;\"}\n> Quantify how \"surprising\" what we saw in our data is, if the null hypothesis was true\n:::\n\n## How do I get a p-value?\n\n. . .\n\n<center>\n\n::: {style=\"font-size: 2em; color: #ed8402;\"}\nPermuting!\n:::\n\n. . .\n\n::: small\n1.  From your original sample, separate the $x$ values from the $y$ values.\n\n2.  Create new ordered pairs by randomly pairing $x$ values with $y$ values (permuting the labels).\n:::\n\n. . .\n\n<center>\n\n::: {style=\"font-size: 0.75em; color: #ed8402;\"}\nThis is your permuted resample.\n:::\n\n</center>\n\n. . .\n\n::: small\n3.  Repeat this process many, many times.\n:::\n\n. . .\n\n::: small\n4.  Calculate a numerical summary (e.g., slope) for each permutation resample.\n:::\n\n. . .\n\n<center>\n\n::: {style=\"font-size: 0.75em; color: #ed8402;\"}\nThese are your permuted statistics.\n:::\n\n</center>\n\n## Permutation Distribution\n\n. . .\n\n> [*definition*: a distribution of the]{style=\"color: #000000;\"} [*permuted statistics*]{style=\"color: #e28743;\"} [from every]{style=\"color: #000000;\"} [*permuted resample*]{style=\"color: #e28743;\"}\n\n. . .\n\nDisplays the variability in the statistic that could have happened with repeated sampling, **if the null hypothesis was true**.\n\n. . .\n\n::: {style=\"color: #e28743;\"}\nApproximates the true sampling distribution under the null!\n:::\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nHow do I get my p-value?\n:::\n\n. . .\n\nCompare the observed statistic with the statistics produced assuming the null hypothesis was true.\n\n. . .\n\n</br>\n\n::: {style=\"font-size: 1.25em;\"}\nA p-value summarizes the [**probability**]{style=\"color: #76b5c5;\"} of obtaining a sample statistic [as or more extreme than what we observed]{.underline}, [**if the null hypothesis was true**]{style=\"color: #76b5c5;\"}.\n:::\n\n<!-- add slides about HT decisions -->\n\n## \n\n::: {style=\"font-size: 3em; color: #000000;\"}\nYour turn!\n:::\n\n::: {style=\"font-size: 1.5em; color: #000000;\"}\n**What is one similarity and one difference between**\n:::\n\n::: columns\n::: {.column width=\"45%\"}\n::: {style=\"font-size: 1.5em; color: #76b5c5;\"}\na permutation distribution\n:::\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n::: {style=\"font-size: 1.5em; color: #e28743;\"}\na bootstrap distribution\n:::\n:::\n:::\n\n## Exploring the `hbr_maples` dataset!\n\n::: columns\n::: {.column width=\"40%\"}\n![](images/hbr_maples.jpg)\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"55%\"}\n`stem_length`: a number denoting the height of the seedling in millimeters\n\n`stem_dry_mass`: a number denoting the dry mass of the stem in grams\n:::\n:::\n\n## \n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](week8-day1_files/figure-html/seedlings-slr-1.png){width=672}\n:::\n:::\n\n\n\n. . .\n\n::: {style=\"font-size: 1.5em; color: #76b5c5;\"}\n**What condition do we need to be worried about?**\n:::\n\n## In this sample of 359 sugar maples...\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlength_mass_lm <- lm(stem_dry_mass ~ stem_length, data = hbr_maples)\n\nregression_table <- get_regression_table(length_mass_lm) \n\nintercept <- filter(regression_table, term == \"intercept\") %>% \n  pull(estimate)\n\nslope <- filter(regression_table, term == \"stem_length\") %>% \n  pull(estimate)\n```\n:::\n\n\n\n$$\\widehat{\\text{stem dry mass}} = -0.043 + 0.001 \\times \\text{stem length}$$\n\n. . .\n\n</br>\n\n::: {style=\"font-size: 1.5em;\"}\nWhat slope could have happened if there was **no** relationship between stem length and stem dry mass?\n:::\n\n## Generating a permuted resample and calculating permuted statistics\n\n</br>\n\n. . .\n\n**Step 1:** `specify()` your response and explanatory variables\n\n. . .\n\n**Step 2:** `hypothesize()` what would happen under the null\n\n. . .\n\n**Step 3:** `generate()` permuted resamples\n\n. . .\n\n**Step 4:** `calculate()` the statistic of interest\n\n## Step 1: Specify your variables!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhbr_maples %>% \n  specify(response = stem_dry_mass,\n          explanatory = stem_length)\n```\n:::\n\n\n\n## Step 2: State your hypothesis!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhbr_maples %>% \n  specify(response = stem_dry_mass,\n          explanatory = stem_length) %>% \n  hypothesize(null = \"independence\")\n```\n:::\n\n\n\n</br>\n\n`\"independence\"` -- the assumed relationship between the explanatory and response variables under the null hypothesis\n\n. . .\n\n::: callout-tip\n# Independence of variables\n\nNote! This is different from assuming your observations are independent!\n:::\n\n## Step 3: Generate your resamples!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhbr_maples %>% \n  specify(response = stem_dry_mass,\n          explanatory = stem_length) %>% \n  hypothesize(null = \"independence\") %>% \n  generate(reps = 1000, type = \"permute\")\n```\n:::\n\n\n\n. . .\n\n</br>\n\n::: columns\n::: {.column width=\"45%\"}\n`reps` -- the number of resamples you want to generate\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n`\"permute\"` -- the method that should be used to generate the new samples\n:::\n:::\n\n## Don't worry,\n\n`infer` will let you know if you missed something!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhbr_maples %>% \n  specify(response = stem_dry_mass,\n          explanatory = stem_length) %>% \n  generate(reps = 1000, type = \"permute\")\n```\n:::\n\n\n\n</br>\n\n```         \nError: Permuting should be done only when doing independence hypothesis test. See `hypothesize()`.\nIn addition: Warning message:\nYou have given `type = \"permute\"`, but `type` is expected to be `\"bootstrap\"`.\nThis workflow is untested and the results may not mean what you think they mean. \n```\n\n## Step 4: Calculate your statistics!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhbr_maples %>% \n  specify(response = stem_dry_mass,\n          explanatory = stem_length) %>% \n  hypothesize(null = \"independence\") %>% \n  generate(reps = 1000, type = \"permute\") %>% \n  calculate(stat = \"slope\") \n```\n:::\n\n\n\n## Your turn!\n\nWhy is the `hypothesize()` function used to make a null distribution but not for a bootstrap distribution?\n\n</br>\n\nWhat does the `null = \"independence\"` input in `hypothesize()` mean? What is it assuming about the variables declared in the `specify()` step?\n\n## The final product\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualise(null_dist) + \n  labs(x = \"Permuted Slope Statistic\")\n```\n\n::: {.cell-output-display}\n![](week8-day1_files/figure-html/null-dist-1.png){width=70%}\n:::\n:::\n\n\n\n## Is our observed statistic unlikely if the null hypothesis was true?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nobs_slope <- hbr_maples %>% \n  specify(response = stem_dry_mass,\n          explanatory = stem_length) %>% \n  calculate(stat = \"slope\") \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualise(null_dist) +\n  shade_p_value(obs_stat = obs_slope, \n                direction = \"two-sided\") +\n  labs(x = \"Permuted Slope Statistic\")\n```\n\n::: {.cell-output-display}\n![](week8-day1_files/figure-html/null-dist-with-obs-slope-1.png){width=672}\n:::\n:::\n\n\n\n## The p-value is...\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_p_value(null_dist, \n            obs_stat = obs_slope, \n            direction = \"two-sided\") \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Please be cautious in reporting a p-value of 0. This result is an\napproximation based on the number of `reps` chosen in the `generate()` step.\nSee `?get_p_value()` for more information.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1       0\n```\n\n\n:::\n:::\n\n\n\n. . .\n\n</br>\n\n::: {style=\"font-size: 1.5em; color: #ed8402;\"}\nWhy did we get a warning?\n:::\n\n## How do we interpret a p-value?\n\n. . .\n\nNeed:\n\n-   probability of what we saw in the data\n-   assuming the null hypothesis is true\n\n. . .\n\n> The probability of observing a slope statistic (for the relationship between stem length and stem dry mass) as or more extreme than what was observed is less than 1 in 1000, if there was no relationship between a sugar maple's stem length and stem dry mass.\n\n## Classic interpretation mistakes\n\n</br>\n\n> \"The probability that the null hypothesis is true is about 0%.\"\n\n. . .\n\n::: {style=\"font-size: 1.25em; color: #ed8402;\"}\nYou assume the null is true when you calculate a p-value!\n:::\n\n<!-- add slide about HT decision / conclusion -->\n\n<!-- add slide about why we choose 0.05 versus 0.01 -->\n\n<!-- add slide about why we use != instead of > or < -->\n\n# Grade Check-in\n\n## Midterm Projects -- Study Limitations\n\n</br>\n\nYou must **justify** why you believe you can infer onto a population larger than your sample!\n\n. . .\n\n</br>\n\nCausal statements **do not** come from random / representative samples!\n\n## Midterm Project Grades\n\n::: small\n| **Excellent Project**                                                             | **Satisfactory Project**                                                                           | **Progressing Project**                                                               | **No Credit**                                                                                      |\n|-----------------|-------------------|-----------------|-------------------|\n| At most one section is marked \"Satisfactory\" the remainder are marked \"Excellent\" | At most one section is marked \"Progressing\" the remainder are marked \"Satisfactory\" or \"Excellent\" | At most two sections are marked \"Progressing\" the remainder are marked \"Satisfactory\" | At most one section is marked \"Satisfactory\" or \"Excellent\" the remainder are marked \"Progressing\" |\n:::\n\n# [Grade Check-in Activity](../activity/week-8-grade-check.qmd \"Grade Check-in Activity\")\n",
    "supporting": [
      "week8-day1_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}