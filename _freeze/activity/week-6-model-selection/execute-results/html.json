{
  "hash": "347130b377cc9160b9c270c8ea9f46bb",
  "result": {
    "markdown": "---\ntitle: \"\"\nformat: html\neditor: visual\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(palmerpenguins)\nlibrary(moderndive)\n```\n:::\n\n\n## Full Model -- ALL Explanatory Variables Included\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . , data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.877         0.873 79631.  282.  287.      255.       0     9   333\n```\n:::\n:::\n\n\n::: {.callout-note}\n# Starting adjusted $R^2$\n\nNote the adjusted $R^2$ value you are starting with, as this will influence your decisions.\n:::\n\n## Variable Selection\n\nNow, starting with our full model, we will use backwards selection to decide what variable(s) should be removed from the model. \n\nYou can only delete a variable if it **increases** adjusted $R^2$. \n\n::: {.callout-note}\nNote we are not saying how much adjusted $R^2$ needs to be increased, simply that it must be bigger. \n:::\n\n## Models Deleting One Explanatory Variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . -year, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.875         0.872 80659.  284.  288.      284.       0     8   333\n```\n:::\n:::\n\n\n<!-- 0.872 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . -sex, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.853         0.849 94951.  308.  312.      235.       0     8   333\n```\n:::\n:::\n\n\n<!-- 0.849 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . -flipper_length_mm, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.863          0.86 88256.  297.  301.      256.       0     8   333\n```\n:::\n:::\n\n\n<!-- 0.86 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . -bill_depth_mm, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.873          0.87 81908.  286.  290.      279.       0     8   333\n```\n:::\n:::\n\n\n<!-- 0.87 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . -bill_length_mm, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.874         0.871 81384.  285.  289.      281.       0     8   333\n```\n:::\n:::\n\n\n<!-- 0.871 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . -island, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.876         0.874 79869.  283.  286.      329.       0     7   333\n```\n:::\n:::\n\n\n<!-- 0.874 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . -species, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.847         0.843 99062.  315.  319.      257.       0     7   333\n```\n:::\n:::\n\n\n<!-- 0.843 -->\n\n::: {.callout-caution}\n# Which variable should be deleted?\n\nBased on the adjusted $R^2$ values, which variable should be deleted from the model. \n\n*Remember:* You are looking for the model that has a higher adjusted $R^2$ than what you started with!\n:::\n\n<!-- delete island -->\n\n<!-- baseline = 0.873 -->\n\n## Models Deleting Two Explanatory Variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - year, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.875         0.873 80828.  284.  287.      380.       0     6   333\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - sex, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.852         0.849 95580.  309.  312.      313.       0     6   333\n```\n:::\n:::\n\n\n<!-- 0.849 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - flipper_length_mm, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.863         0.861 88278.  297.  300.      344.       0     6   333\n```\n:::\n:::\n\n\n<!-- 0.861 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.873         0.871 82154.  287.  290.      373.       0     6   333\n```\n:::\n:::\n\n\n<!-- 0.871 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_length_mm, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.874         0.871 81636.  286.  289.      376.       0     6   333\n```\n:::\n:::\n\n\n<!-- 0.871 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - species, data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared     mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>   <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.831         0.829 108979.  330.  333.      323.       0     5   333\n```\n:::\n:::\n\n\n<!-- 0.829 -->\n\n<!-- model missing island is best = 0.871  -->\n\n::: {.callout-caution}\n# Which variable should be deleted?\n\nBased on the adjusted $R^2$ values, which variable should be deleted from the model. \n\n*Remember:* You are looking for the model that has a higher adjusted $R^2$ than what you started with!\n:::\n\n\n## New Rules\n\nNow, choose the simplest model that is within 1% of the best adjusted $R^2$ you obtained. \n\n::: {.callout-note}\nNote, when I say \"simplest model\" I mean the model with the fewest variables included. \n:::\n\n<!-- can choose either model as new \"baseline\" -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - bill_length_mm, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.869         0.867 84623.  291.  294.      434.       0     5   333\n```\n:::\n:::\n\n\n<!-- 0.867 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - year, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.871         0.869 83702.  289.  292.      440.       0     5   333\n```\n:::\n:::\n\n\n<!-- 0.869 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - species, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared     mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>   <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.818         0.815 117911.  343.  346.      368.       0     4   333\n```\n:::\n:::\n\n\n<!-- 0.815 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - flipper_length_mm, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.856         0.853 93353.  306.  308.      387.       0     5   333\n```\n:::\n:::\n\n\n<!-- 0.853 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - sex, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared     mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>   <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.832         0.829 108823.  330.  333.      323.       0     5   333\n```\n:::\n:::\n\n\n<!-- 0.829 -->\n\n<!-- deleting year has highest resulting adjusted R-sq = 0.869 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - year - bill_length_mm, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.867         0.865 86047.  293.  296.      534.       0     4   333\n```\n:::\n:::\n\n\n<!-- 0.865 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - year - flipper_length_mm, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.856         0.854 93385.  306.  308.      486.       0     4   333\n```\n:::\n:::\n\n\n<!-- 0.854 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - year - sex, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared     mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>   <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.824         0.822 113574.  337.  340.      385.       0     4   333\n```\n:::\n:::\n\n\n<!-- 0.822 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - year - species, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared     mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>   <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.807         0.805 125076.  354.  356.      457.       0     3   333\n```\n:::\n:::\n\n\n<!-- 0.805 -->\n\n<!-- deleting bill length has highest resulting R-sq = 0.865 -->\n\n<!-- still greater than lowest bound of 0.861 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - year - bill_length_mm - sex, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared     mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>   <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.787         0.785 137667.  371.  373.      405.       0     3   333\n```\n:::\n:::\n\n\n<!-- 0.785 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - year - bill_length_mm - species, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared     mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>   <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.806         0.805 125512.  354.  356.      685.       0     2   333\n```\n:::\n:::\n\n\n<!-- 0.805 -->\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm(body_mass_g ~ . - island - bill_depth_mm - year - bill_length_mm - flipper_length_mm, \n   data = penguins) %>% \n  get_regression_summaries()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 9\n  r_squared adj_r_squared    mse  rmse sigma statistic p_value    df  nobs\n      <dbl>         <dbl>  <dbl> <dbl> <dbl>     <dbl>   <dbl> <dbl> <dbl>\n1     0.847         0.845 99037.  315.  317.      606.       0     3   333\n```\n:::\n:::\n\n\n<!-- 0.845 -->\n\n<!-- none of these models have high enough R-squared! -->\n\n<!-- final model removes: island, bill_depth_mm, year, bill_length_mm -->\n\n<!-- final model contains: sex, species, flipper_length_mm -->\n\n::: {.callout-caution}\n# What is your best model?\n\nWhat variables are included in the final model you chose?\n:::\n\n",
    "supporting": [
      "week-6-model-selection_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}