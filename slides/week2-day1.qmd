---
title: "Visualizing & Summarizing Numerical Data"
author: "STAT 313"
format: 
  revealjs:
    logo: images/ggplot2.png
    theme: [solarized, style.scss]
editor: visual
execute: 
  warning: false
  message: false
---

```{r}
#| echo: false
#| label: packages

library(palmerpenguins)
library(tidyverse)
library(ggridges)
library(gridExtra)

my_theme <- theme(axis.title.x = element_text(size = 14),
                  axis.title.y = element_text(size = 14),
                  axis.title = element_text(size = 16), 
                  axis.text.x = element_text(size = 12), 
                  axis.text.y = element_text(size = 12), 
                  legend.text = element_text(size = 12), 
                  legend.title = element_text(size = 14)
                  )
```

# Lab 1

## Revisions

::: columns
::: {.column width="47%"}
::: {style="font-size: 1.25em;"}
"Complete" = Satisfactory
:::

-   Your images were included in the document
-   You provided responses to every question
:::

::: {.column width="5%"}
:::

::: {.column width="47%"}
::: {style="font-size: 1.25em;"}
"Incomplete" = Growing
:::

-   Your images [were not]{.underline} included in the document
-   You [did not]{.underline} provide responses to every question
:::
:::

## Completing Revisions

::: {style="font-size: 1.25em;"}
Lab 1 revisions are due by Thursday, January 25.
:::

::: small
1.  Read comments on Canvas
2.  Go back into your Lab 1 on Posit Cloud and complete your revisions
3.  Render your revised Lab 1
4.  Download your revised HTML
:::

::: callout-warning
# Reflections

Revisions are required to be accompanied with reflections on what you learned while completing your revisions. These can be written in your Lab 1 Quarto file (next to the problems you revised), in a Word document, in the comment box on Canvas.
:::

## 

::: {style="font-size: 3em; color: #ed8402;"}
10-minutes
:::

::: {style="font-size: 1.5em;"}
-   Review Lab 1 comments
-   Ask questions
-   Start revisions
:::

# Researching Group Collaborations

## 

::: {style="font-size: 3em; color: #ed8402;"}
5-minutes
:::

::: columns
::: {.column width="47%"}
If you [would]{.underline} like to participate

- Complete [consent form](https://bit.ly/collab-consent-form)
- Complete 6-question [pre-collaboration survey](https://bit.ly/pre-collab-survey)
- Complete [demographic survey](https://bit.ly/collab-demographic-survey)
:::

::: {.column width="5%"}
:::

::: {.column width="47%"}
If you [would not]{.underline} like to participate

- Complete [consent form](https://bit.ly/collab-consent-form)
:::
:::

# Week 3

## My Plan

::: columns
::: {.column width="30%"}
::: {.fragment .fade-in-then-semi-out}
::: small
What you can expect from me:

-   Post coursework by Friday
-   Post slides from last quarter
-   Extend Lab 2 revision deadline by 1-week
-   Extend Statistical Critique deadline by 1-week
-   Provide 2 additional deadline extensions
:::
:::
:::

::: {.column width="3%"}
:::

::: {.column width="30%"}
::: {.fragment .fade-in-then-semi-out}
::: small
What I expect from you:

-   Complete coursework
-   Review / work through slides as if you were in class
:::
:::
:::

::: {.column width="5%"}
:::

::: {.column width="30%"}
::: {.fragment .fade-in-then-semi-out}
::: small
What I expect from your group:

-   Complete the lab assignment [**as a group**]{.underline}
:::
:::
:::
:::

# Visualizing Numerical Variables

## Warm-up

```{r}
#| echo: false
#| label: aesthetics
#| fig-align: center

penguins %>% 
  ggplot(aes(x = bill_length_mm, y = species, fill = sex)) + 
  geom_boxplot(alpha = 0.5) + 
  labs(x = "Bill Length (mm)", 
       title = "Comparison of Bill Lengths between Antartic Penguin Species", 
       y = "",
       fill = "Penguin Sex") + 
  my_theme

```

. . .

What are the `aes`thetics in this plot?

What `geom`etric object is being plotted?

## Today's Layout

1.  Review visualizations for numerical variables
2.  Practice producing these visualizations
3.  Discuss the pros / cons of each visualization

. . .

</br>

Open today's interactive document, so you can be ready to code along with me!

::: {style="font-size: 1.25em;"}
<https://bit.ly/week-2-code-along>
:::

##  {background-color="#D4D4D4"}

::: {style="margin-top: 100px; font-size: 2em; color: #000000;"}
Univariate (One Variable) Visualizations -- For Numerical Data
:::

::: incremental
::: {style="color:#000000;"}
-   Histogram (or Dotplot)
-   Boxplot
-   Density Plot
:::
:::

## Histogram

```{r}
#| echo: false
#| label: histogram

ggplot(data = penguins, mapping = aes(x = bill_length_mm)) + 
  geom_histogram(binwidth = 1.5) +
  labs(x = "Bill Length (mm)") + 
  my_theme
```

::: incremental
-   Is `count` a variable in the dataset?
-   How did `ggplot` decide how tall each bar should be?
:::

##  {background-color="#B6CADA"}

::: {style="font-size: 4em;"}
Recreate my plot!
:::

::: {style="font-size: 1.5em;"}
<https://bit.ly/week-2-code-along>
:::

## 

::: columns
::: {.column width="50"}
### What are the strengths of a histogram?

-   Inspect shape of a distribution (skewed or symmetric)
-   Identify modes (most common values)
:::

::: {.column width="50"}
### What are the weaknesses of a histogram?

-   **Do not** plot raw data, plot summaries (counts) of the data!
-   Sensitive to the width of the bins (`binwidth`)
:::
:::

## Boxplot

```{r}
#| echo: false
#| label: boxplot
#| layout-nrow: 1
#| out-height: 100%

ggplot(data = penguins,
       mapping = aes(x = bill_length_mm)) +
  geom_boxplot() + 
  labs(x = "Bill Length (mm)") +
  my_theme +
  theme(axis.text.y = element_blank(), 
        axis.text.x = element_text(size = 20), 
        axis.title.x = element_text(size = 24)
        )

ggplot(data = penguins,
       mapping = aes(y = bill_length_mm)) +
  geom_boxplot() + 
  labs(y = "Bill Length (mm)") +
  theme(axis.text.x = element_blank(), 
        axis.text.y = element_text(size = 20), 
        axis.title.y = element_text(size = 24)
        )
```

. . .

What calculations are necessary for creating a boxplot?

##  {background-color="#B6CADA"}

::: {style="font-size: 4em;"}
Recreate my plot!
:::

::: {style="font-size: 1.5em"}
<https://bit.ly/week-2-code-along>
:::

## 

::: columns
::: {.column width="50"}
What are strengths of a boxplot?

::: fragment
-   Easy to flag unusual observations
-   Easy to see the median
:::
:::

::: {.column width="50"}
What are weaknesses of a boxplot?

::: fragment
-   Don't plot raw data
-   Only plot summary statistics
-   Hide multiple modes
:::
:::
:::

##  {background-color="#000000"}

![](images/boxplot_horst.png)

## Density Plot

```{r}
#| echo: false
#| label: density

ggplot(data = penguins,
       mapping = aes(x = bill_length_mm)) +
  geom_density() +
  labs(x = "Bill Length (mm)") +
  my_theme
```

. . .

-   A smooth approximation to a variable's distribution
-   Plots density (as a proportion) on the y-axis

## 

::: columns
::: {.column width="50"}
What are strengths of a density plot?

::: fragment
-   Inspect shape of a distribution (skewed or symmetric)
-   Identify modes (most common values)
-   Less jagged than a histogram
:::
:::

::: {.column width="50"}
What are weaknesses of a density plot?

::: fragment
-   Do not plot raw data, plot summaries (proportions) of the data!
-   y-axis is difficult to interpret
-   Can over smooth and hide interesting shapes
:::
:::
:::

##  {background-color="#D4D4D4"}

::: {style="margin-top: 100px; font-size: 2em; color: #000000;"}
Bivariate (Two Variables) Visualizations -- For Numerical Data
:::

::: incremental
::: {style="color: #000000;"}
-   Scatterplots (Week 2)

-   Faceted Histograms (Week 3)

-   Side-by-Side Boxplots (Week 3)

-   Stacked Density Plots (Week 3)
:::
:::

## Scatterplots

```{r}
#| echo: false
#| label: scatterplot

ggplot(data = penguins,
       mapping = aes(y = bill_length_mm, x = bill_depth_mm)) +
  geom_point() +
  labs(x = "Bill Depth (mm)", 
       y = "Bill Length (mm)") +
  my_theme
```

. . .

What are the `geom`etric objects being plotted in a scatterplot?

##  {background-color="#B6CADA"}

::: {style="font-size: 4em;"}
Recreate my plot!
:::

::: {style="font-size: 1.5em;"}
<https://bit.ly/week-2-code-along>
:::

## 

> "The scatterplot the most generally useful invention in the history of statistical graphics."

</br>

. . .

::: columns
::: {.column width="50"}
What are strengths of a scatterplot?

::: fragment
-   Plots the **raw** data!
-   Inspect form, strength, and direction of a relationship
-   Identify unusual values
:::
:::

::: {.column width="50"}
What are weaknesses of a scatterplot?

::: fragment
-   Can get "busy" when there are lots of observations (points)
:::
:::
:::

##  {background-color="#D4D4D4"}

::: {style="margin-top: 100px; font-size: 2em; color: #000000;"}
Multivariate (3+ Variables) Plots
:::

::: {style="color: #000000; font-size: 0.75em;"}
There are two main methods for adding a third (or fourth) variable into a data visualization:

::: columns
::: {.column width="50%"}
::: fragment
::: {style="color: #34605f; font-size: 1.25em;"}
Colors
:::

-   creates colors for every level of a categorical variable
-   creates a gradient for different values of a quantitative variable
:::
:::

::: {.column width="50%"}
::: fragment
::: {style="color: #b76352; font-size: 1.25em;"}
Facets
:::

-   creates subplots for every level of a categorical variable
-   labels each sub-plot with the value of the variable
:::
:::
:::
:::

## Colors in Scatterplots -- Numerical Variable

```{r }
#| fig-align: center
#| label: scatterplot-color-num 
#| echo: false

ggplot(data = penguins,
       mapping = aes(y = bill_length_mm,
                     x = bill_depth_mm,
                     color = body_mass_g)
       ) +
  geom_point() +
  labs(x = "Bill Depth (mm)", 
       y = "Bill Length (mm)", 
       color = "Body Mass (g)")
```

##  {background-color="#B6CADA"}

::: {style="font-size: 4em;"}
Recreate my plot!
:::

## Colors in Scatterplots -- Categorical Variable

```{r}
#| fig-align: center
#| echo: false
#| label: scatterplot-color-cat

ggplot(data = penguins,
       mapping = aes(y = bill_length_mm,
                     x = bill_depth_mm,
                     color = species)
       ) +
  geom_point() +
  labs(x = "Bill Depth (mm)", 
       y = "Bill Length (mm)", 
       color = "Penguin Species") +
  my_theme
```

## Why not use facets with a numerical variable???

. . .

```{r scatterplot-facets-num}
#| fig-align: center
#| echo: false

ggplot(data = penguins,
       mapping = aes(y = bill_length_mm,
                     x = bill_depth_mm)) +
  geom_point() +
  facet_wrap(~ body_mass_g) + 
  labs(x = "Bill Depth (mm)", 
       y = "Bill Length (mm)")
  
```

##  {background-color="#f48153"}

::: {style="font-size: 3.5em; color: #000000;"}
Some Rules to Play By
:::

</br>

::: {style="font-size: 0.75em; color: #000000;"}
::: incremental
-   Look at and understand your *raw* data before aggregating
-   Boxplots (and such) don't count as visualizing the raw data
:::
:::

# Lab 2

## Departure Delays

-   Inspect the `nycflights` dataset
-   Visualize departure delays
-   Play with `binwidth`
-   Filter data to include only certain flights
-   Calculate summary statistics
-   Compare summary statistics with a visualization
