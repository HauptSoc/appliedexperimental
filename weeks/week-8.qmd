---
title: "Week 8 -- Conditions for Inference & One-Way ANOVA"
format: 
  html: 
    number-sections: true
    number-depth: 2
    section-divs: true
editor: source
execute: 
  echo: true
  warning: false
  message: false
---

```{r}
#| label: packages-data
#| echo: false

library(tidyverse)
library(palmerpenguins)
library(broom)
library(moderndive)

penguins_clean <- penguins %>% 
  drop_na(sex)
```


# Textbook Reading

First, we are going to refresh on the conditions for linear regression. You 
might want to reference last week's reading while completing the first reading
guide: [**Model Conditions for Linear Regression**](chapters/week7-reading2.qmd)

::: callout-note
## Reading Guide -- Due Monday by the start of class

There are a few questions from this that are similar to the of last week's
reading guide. Feel free to copy and paste your previous answers to this 
reading guide! 

[Download the Word Document](reading-guide/week8-reading1.qmd)
:::

Now, let's read about how hypothesis testing extends into multiple linear
regression. This allows us to connect to our new topic---ANOVA! 

[**Required Reading:** Hypothesis Tests for Multiple Linear Regression](chapters/week-8-reading-mlr.qmd)

::: callout-important
There is no reading guide for this chapter, just a concept quiz! 
:::

# Concept Quizzes

We have two concept quizzes this week, one that is due by Monday (on model
conditions) and one that is due by Wednesday (on ANOVA). 

## Due Monday by the start of class

**1. What are the required conditions for linear regression?** (select all that apply)

-   a random sample was taken
-   equal variance of residuals
-   a large sample was collected
-   linear relationship between x and y
-   independence of observations
-   independence of variables
-   normality of residuals
-   normality of observations

**2. In the scatterplot of stem dry mass versus stem length, what condition appears to be violated?** (select all that apply)

-   equal variance of residuals
-   linear relationship between x and y
-   independence of observations
-   normality of residuals

**3. Which of the following would violate the condition of independence?** (select all that apply)

-   collecting a non-random sample
-   observations related geographically (spatially)
-   observations that are related in time (temporally)
-   repeated observations on the same person
-   observations related biologically

**4. When conducting a hypothesis test (in general), we assume the \[observations / variables\] are independent. When conducting a hypothesis test for a linear regression, the conditions require that the \[observations / variables\] are independent.**

## Due Wednesday by the start of class

```{r}
#| label: species-lm-coefficient-table
#| echo: false

species_lm <- lm(bill_length_mm ~ body_mass_g * species, 
             data = penguins_clean)

get_regression_table(species_lm) %>% 
  gt::gt()
```

1. In the coefficient table, the `body_mass_g:speciesChinstrap` line is testing if
the [slope / intercept] (of the relationship between body mass and bill length)
is different for [Adelie / Chinstrap / Gentoo] penguins as compared to 
[Adelie / Chinstrap / Gentoo] penguins.

2. In the coefficient table, the `body_mass_g:speciesGentoo` line is testing if
the [slope / intercept] (of the relationship between body mass and bill length)
is different for [Adelie / Chinstrap / Gentoo] penguins as compared to 
[Adelie / Chinstrap / Gentoo] penguins.
 
3. True or false, you can use the regression table to test if the slope for 
Chinstrap and Gentoo penguins are different. 

```{r}
#| label: species-lm-anova-table
#| echo: false

anova(species_lm) %>% 
  tidy() %>% 
  mutate(p.value = round(p.value, digits = 8)) %>% 
  gt::gt()
```

4. Match the appropriate null and alternative hypothesis being tested in the
`body_mass_g:species` line of the ANOVA table.

::: columns
::: {.column width="40%"}
**Null Hypothesis**

</br> 

**Alternative Hypothesis**
:::

::: {.column width="5%"}
:::

::: {.column width="55%"}

- The relationship between body mass and bill length is the same for this sample
of Adelie, Chinstrap, and Gentoo penguins

- The relationship between body mass and bill length is the same for all Adelie,
Chinstrap, and Gentoo penguins

- The relationship between body mass and bill length is different for a least
one species of penguins

- The relationship between body mass and bill length is different for the Adelie
penguins

- The relationship between body mass and bill length is different for the
Chinstrap penguins

- The relationship between body mass and bill length is different for the Gentoo
penguins
:::
:::

5. The `species` line of the ANOVA table is testing if the [intercept / slope]
is different for [every species / at least one species / at least two species]. 

6. True or false, the `body_mass_g` line of the ANOVA table and the 
`body_mass_g` line of the coefficient table are performing the same hypothesis
test.

# R Tutorial -- Due Monday by the start of class (note the new time!)

[**Required Tutorial:** Evaluating the technical conditions in linear regression](https://openintro.shinyapps.io/ims-06-model-infer-04/)


